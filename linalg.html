<!DOCTYPE html>
<html>
<head>
  <title>Diagonalizable Matrix Checker </title>
        <style>
            body { font-family: Arial; padding: 20px; }
            input { width: 60px; }
            table { border-collapse: collapse; margin-bottom: 10px; }
            td { border: 1px solid #ccc; padding: 4px; }
            button { margin: 5px; padding: 6px 12px; }
            pre { background: #f4f4f4; padding: 10px; }
    </style>
        </head>
        
        <body>
        <h2>Diagonalizable Matrix Checker</h2>

        <h3>INSTRUCTIONS</h3>
            <h4>êîå’û ‹∏.À¨.‹∏’ûê¶Ø</h4>
        <label>Matrix size n (‚â§5): </label>
         <select name="size" id="n">
            <option value="2">2*2</option>
            <option value="3">3*3</option>
            <option value="4">4*4</option>
            <option value="5">5*5</option>
        </select>
        <button onclick="makeMatrix()">Create Matrix</button>
        <div id="matrixArea"></div>
        <button onclick="confirmInput()">Check if the Matrix is Diagonalizable</button>
        <button onclick="clearMatrix()">Clear Matrix</button>
        <pre id="output"></pre>
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/14.8.1/math.js"></script>
        <script>
        let A = [];
        let create=false;
        function makeMatrix(){
        create=true;
        let n = +document.getElementById('n').value;
        let prev = n;
        let html = '<table>';
        for(let i=0;i<n;i++){
            html += '<tr>';
            for(let j=0;j<n;j++){
            html += `<td><input id="a${i}${j}" value=" "></td>`;
            }
            html+='</tr>';
        }
        html+='</table>';
        document.getElementById('matrixArea').innerHTML = html;
        }

        function clearMatrix(){
        if(create==false){
            alert(`Please create a matrix first`);
            return;
        }
        let html = '<table>';
        for(let i=0;i<prev;i++){
            html += '<tr>';
            for(let j=0;j<prev;j++){
            html += `<td><input id="a${i}${j}" value=" "></td>`;
            }
            html+='</tr>';
        }
        html+='</table>';
        document.getElementById('matrixArea').innerHTML = html;
        }

        function confirmInput(){
        if(create==false){
            alert(`Please create a matrix first`);
            return;
        }
        let n = document.getElementById('n').value;
        A = [];
        for(let i=0;i<n;i++){
            let row=[];
            for(let j=0;j<n;j++)
            { 
                let number=document.getElementById(`a${i}${j}`).value;
                if(+document.getElementById(`a${i}${j}`).value ==""){
                alert(`Please input a valid number in cell ${i}${j}`);
                return;
                }else if(number.includes("/")){
                    let val=number.split("/");
                    document.getElementById(`a${i}${j}`).value=parseFloat(val[0])/parseFloat(val[1]);
                    
                }
                row.push(+document.getElementById(`a${i}${j}`).value);
            }
            A.push(row);
        }
        analyze();
        }

        function eigenvalues(A){
            const result = math.eigs(A);
            return result.values;
        }

        function solveEigenVector(A) {
            const result = math.eigs(A);
            return result.eigenvectors;
        }

        function clone(M){ return M.map(r=>r.slice()); }

            function multiply(A,B){
            let n=A.length, m=B[0].length, p=B.length;
            let C=Array.from({length:n},()=>Array(m).fill(0));
            for(let i=0;i<n;i++)for(let j=0;j<m;j++)for(let k=0;k<p;k++)C[i][j]+=A[i][k]*B[k][j];
            return C;
        }

        function identity(n){ return Array.from({length:n},(_,i)=>Array.from({length:n},(_,j)=>i===j?1:0)); }

        function transpose(M){ return M[0].map((_,j)=>M.map(r=>r[j])); }

            function qrDecomp(A){
            let n=A.length;
            let Q=identity(n), R=clone(A);
                for(let j=0;j<n;j++){
                    let v = R.map(r=>r[j]);
                    for(let i=0;i<j;i++){
                    let qi = Q.map(r=>r[i]);
                    let dot = qi.reduce((s,x,k)=>s+x*v[k],0);
                    for(let k=0;k<n;k++) v[k]-=dot*qi[k];
                    }
                    let norm = Math.sqrt(v.reduce((s,x)=>s+x*x,0));
                    if(norm===0) continue;
                    for(let k=0;k<n;k++) Q[k][j]=v[k]/norm;
        }
        R = multiply(transpose(Q),A);
        return {Q,R};
        }

        function analyze(){
        let out=document.getElementById('output');
        let n=A.length;
        if(n===0){ out.textContent='Please confirm matrix first.'; return; }

        let eig = eigenvalues(A).map(x=>Math.round(x*1000)/1000);
        out.textContent='Approx eigenvalues: '+eig.join(', ')+'\n';

        let unique = [...new Set(eig)];
        if(unique.length===n){
            out.textContent+='All eigenvalues distinct ‚Üí Diagonalizable.\n';
        }else{
            out.textContent+='Repeated eigenvalues detected. Might not be diagonalizable.\n';
        }
        out.textContent+='(Full P and D computation is conceptually: columns of P = eigenvectors, D = diag(eigenvalues))';
        }
</script>
</body>
</html>
